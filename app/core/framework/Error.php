<?php

namespace Core\Framework;

class Error {

    public function NotFound() {
        http_response_code(404);
        echo '404 Not found';
    }

    public function MethodNotAllowed() {
        http_response_code(405);
        echo '405 Not Allowed';
    }

    public function withMessage($message) {
        throw new \Exception($message);
    }

    public function UnsupportedType($type = null) {
        throw new \Exception('Unsupported Type: ' . $type);
    }

    private function dumpTrace($trace) {
        $result = [];
        foreach ($trace as $item) {
            $result[] = $item['class'] . $item['type'] . $item['function'] . ' <b>line ' . $item['line'] . '</b>';
        }
        return $result;
    }

    public function FatalError($error) {
        $trace = $this->dumpTrace($error->getTrace());
        echo '<html>'
        . '<head>'
        . '<title>Fatal Error</title>'
        . '</head>'
        . '<body style="margin:10px;">'
        . '<div style="padding:15px; border:2px solid black;">';
        echo '<pre style="background: black;color: white;padding:10px;">Fatal Error ' . $error->getMessage() . '! </pre>';
        echo '<img src="data:image/png;base64,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">';
        echo '<h3>Trace</h3>';
        foreach ($trace as $num => $item) {
            echo '<pre style="padding:5px;"><b>' . ($num + 1) . '. </b>' . $item . '</pre>';
        }
        echo '</div>'
        . '</body>'
        . '</html>';
    }

}
